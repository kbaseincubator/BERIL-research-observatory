{% extends "base.html" %}

{% block title %}About - {{ app_name }}{% endblock %}

{% block content %}
<!-- Hero -->
<div class="page-header">
    <h1 class="page-title">About Microbial Discovery Forge</h1>
    <p class="page-description">
        AI co-scientist and research observatory for BERDL-scale microbial discovery.
    </p>
</div>

<!-- Architecture -->
<section class="section">
    <h2>Architecture</h2>
    <div class="card" style="padding: var(--space-4); text-align: center;">
        <img src="{{ url_for('static', path='images/architecture_dark.png') }}"
             alt="Microbial Discovery Forge architecture diagram"
             style="width: 100%; max-width: 900px; height: auto; border-radius: var(--radius-sm);"
             loading="lazy">
    </div>
</section>

<!-- Two Experiences -->
<section class="section">
    <h2>Two Experiences</h2>
    <div class="grid grid-2">
        <a href="/co-scientist" class="card" style="text-decoration: none; border-left: 4px solid var(--accent-primary);">
            <h3 style="color: var(--text-primary); margin-top: 0;">AI Co-Scientist</h3>
            <p class="text-small">
                A human-in-the-loop AI research workflow that plans analyses, executes
                them on BERDL, synthesizes findings with literature context, and captures
                lessons learned as reusable skills and memory.
            </p>
        </a>
        <a href="/projects" class="card" style="text-decoration: none; border-left: 4px solid var(--accent-secondary);">
            <h3 style="color: var(--text-primary); margin-top: 0;">Research Observatory</h3>
            <p class="text-small">
                Explore curated data collections, browse completed research projects
                with full reports, and discover findings documented with figures,
                citations, and reproducible notebooks.
            </p>
        </a>
    </div>
</section>

<!-- Microbial Discovery Forge Team -->
<section class="section">
    <h2>Microbial Discovery Forge Team</h2>

    <!-- PI lead card -->
    <div class="card pi-card" style="border-left: 4px solid var(--accent-primary); margin-bottom: var(--space-6);">
        <div style="position: relative;">
            <img src="https://www.kbase.us/wp-content/uploads/sites/6/2020/06/dehal-paramvir_rev@2x.png"
                 alt="Headshot of Paramvir S. Dehal"
                 class="pi-avatar"
                 onerror="this.style.display='none';this.nextElementSibling.style.display='flex'">
            <div class="avatar-initials pi-avatar-initials" style="display:none">PD</div>
        </div>
        <div>
            <h3 style="margin: 0 0 var(--space-2) 0;">Paramvir S. Dehal</h3>
            <p class="text-small" style="margin-bottom: var(--space-2);">
                Project lead &amp; primary contact; PI BERIL and AI/ML Team Lead KBase; Scientific lead, primary developer of Microbial Discovery Forge
            </p>
            <p class="text-small" style="margin-bottom: 0;">
                <a href="mailto:psdehal@lbl.gov">psdehal@lbl.gov</a>
                &bull;
                <a href="https://orcid.org/0000-0001-5810-2497" target="_blank" rel="noopener">ORCID</a>
            </p>
        </div>
    </div>

    <!-- Team grid -->
    <div class="team-grid">
        <div class="card team-card">
            <div style="position: relative;">
                <img src="https://berkeleybop.org/people/chris-mungall/Mungall-headshot.jpeg"
                     alt="Headshot of Chris Mungall" class="team-avatar"
                     onerror="this.style.display='none';this.nextElementSibling.style.display='flex'">
                <div class="avatar-initials" style="display:none">CM</div>
            </div>
            <div>
                <strong>Chris Mungall</strong>
                <p class="text-muted text-small" style="margin: 0;">Ontologies and metadata/data harmonization guidance</p>
            </div>
        </div>
        <div class="card team-card">
            <div style="position: relative;">
                <img src="https://www.kbase.us/wp-content/uploads/sites/6/2020/07/riehl-bill_rev%402x.png"
                     alt="Headshot of William J. Riehl" class="team-avatar"
                     onerror="this.style.display='none';this.nextElementSibling.style.display='flex'">
                <div class="avatar-initials" style="display:none">WR</div>
            </div>
            <div>
                <strong>Bill Riehl</strong>
                <p class="text-muted text-small" style="margin: 0;">Engineering support</p>
            </div>
        </div>
        <div class="card team-card">
            <div style="position: relative;">
                <img src="https://www.kbase.us/wp-content/uploads/sites/6/2024/03/kishore-dileep.jpeg"
                     alt="Headshot of Dileep Kishore" class="team-avatar"
                     onerror="this.style.display='none';this.nextElementSibling.style.display='flex'">
                <div class="avatar-initials" style="display:none">DK</div>
            </div>
            <div>
                <strong>Dileep Kishore</strong>
                <p class="text-muted text-small" style="margin: 0;">Skills development and evaluations contributions</p>
            </div>
        </div>
        <div class="card team-card">
            <div style="position: relative;">
                <img src="https://berkeleybop.org/people/justin-reese/justin.jpg"
                     alt="Headshot of Justin Reese" class="team-avatar"
                     onerror="this.style.display='none';this.nextElementSibling.style.display='flex'">
                <div class="avatar-initials" style="display:none">JR</div>
            </div>
            <div>
                <strong>Justin Reese</strong>
                <p class="text-muted text-small" style="margin: 0;">Evaluations contributions</p>
            </div>
        </div>
        <div class="card team-card">
            <div style="position: relative;">
                <img src="https://www.kbase.us/wp-content/uploads/sites/6/2024/03/harris_nomi.png"
                     alt="Headshot of Nomi Harris" class="team-avatar"
                     onerror="this.style.display='none';this.nextElementSibling.style.display='flex'">
                <div class="avatar-initials" style="display:none">NH</div>
            </div>
            <div>
                <strong>Nomi Harris</strong>
                <p class="text-muted text-small" style="margin: 0;">Project management support</p>
            </div>
        </div>
        <div class="card team-card">
            <div style="position: relative;">
                <img src="https://www.kbase.us/wp-content/uploads/sites/6/2023/10/cashman-mikaela-scaled.jpg"
                     alt="Headshot of Mikaela Cashman" class="team-avatar"
                     onerror="this.style.display='none';this.nextElementSibling.style.display='flex'">
                <div class="avatar-initials" style="display:none">MC</div>
            </div>
            <div>
                <strong>Mikaela Cashman</strong>
                <p class="text-muted text-small" style="margin: 0;">Data collections</p>
            </div>
        </div>
    </div>
</section>

<!-- Partner / Enabling Effort -->
<section class="section">
    <h2>Partner / Enabling Effort</h2>
    <div class="team-grid">
        <div class="card team-card">
            <div style="position: relative;">
                <img src="https://biosciences.lbl.gov/wp-content/uploads/2015/09/ArkinAdam.jpg"
                     alt="Headshot of Adam Arkin" class="team-avatar"
                     onerror="this.style.display='none';this.nextElementSibling.style.display='flex'">
                <div class="avatar-initials" style="display:none">AA</div>
            </div>
            <div>
                <strong>Adam Arkin</strong>
                <p class="text-muted text-small" style="margin: 0;">Vision/leadership for BERDL (KBase)</p>
            </div>
        </div>
        <div class="card team-card">
            <div style="position: relative;">
                <img src="https://www.kbase.us/wp-content/uploads/sites/6/2020/06/ChrisHenryPicture.jpg"
                     alt="Headshot of Chris Henry" class="team-avatar"
                     onerror="this.style.display='none';this.nextElementSibling.style.display='flex'">
                <div class="avatar-initials" style="display:none">CH</div>
            </div>
            <div>
                <strong>Chris Henry</strong>
                <p class="text-muted text-small" style="margin: 0;">Driving BERDL data resources and curation</p>
            </div>
        </div>
        <div class="card team-card">
            <div style="position: relative;">
                <img src="https://www.kbase.us/wp-content/uploads/sites/6/2024/02/mahmud-gazi.jpg"
                     alt="Headshot of Gazi Mahmud" class="team-avatar"
                     onerror="this.style.display='none';this.nextElementSibling.style.display='flex'">
                <div class="avatar-initials" style="display:none">GM</div>
            </div>
            <div>
                <strong>Gazi Mahmud</strong>
                <p class="text-muted text-small" style="margin: 0;">BERDL architect</p>
            </div>
        </div>
        <div class="card team-card">
            <div style="position: relative;">
                <img src="https://jgi.doe.gov/sites/default/files/styles/medium/public/2024-12/Kjiersten-Fagnan-JLT.jpg.webp?itok=sdcPmWCR"
                     alt="Headshot of Kjiersten Fagnan" class="team-avatar"
                     onerror="this.style.display='none';this.nextElementSibling.style.display='flex'">
                <div class="avatar-initials" style="display:none">KF</div>
            </div>
            <div>
                <strong>Kjiersten Fagnan</strong>
                <p class="text-muted text-small" style="margin: 0;">BERIL co-PI</p>
            </div>
        </div>
        <div class="card team-card">
            <div style="position: relative;">
                <img src="https://www.pnnl.gov/sites/default/files/styles/portrait/public/media/image/Ratna_Saripalli_PNNL.jpg?h=3dd0356d&itok=E5wMIvuA"
                     alt="Headshot of Ratna Saripalli" class="team-avatar"
                     onerror="this.style.display='none';this.nextElementSibling.style.display='flex'">
                <div class="avatar-initials" style="display:none">RS</div>
            </div>
            <div>
                <strong>Ratna Saripalli</strong>
                <p class="text-muted text-small" style="margin: 0;">BERIL co-PI</p>
            </div>
        </div>
    </div>
</section>

<!-- Contributing Projects and Resources -->
<section class="section">
    <h2>Contributing Projects and Resources</h2>

    <h3>Infrastructure</h3>
    <div class="grid grid-3">
        <div class="card">
            <h4 style="margin-top: 0;">BERIL</h4>
            <p class="text-small">
                The <strong>BER Intelligent Layer</strong> is the broader program providing AI integration
                capabilities for DOE BER data resources. The Research Observatory is developed under the
                BERIL project umbrella.
            </p>
        </div>
        <div class="card">
            <h4 style="margin-top: 0;">KBase</h4>
            <p class="text-small">
                The <strong>Department of Energy Systems Biology Knowledgebase</strong> provides the platform
                ecosystem, community infrastructure, and the AI/ML team that supports this work.
            </p>
        </div>
        <div class="card">
            <h4 style="margin-top: 0;">BERDL</h4>
            <p class="text-small">
                The <strong>BER Data Lakehouse</strong> is the underlying data resource hosting 35+ databases
                across 9 tenants of curated scientific datasets. Developed by the KBase team, BERDL provides
                the data foundation for all Observatory analyses.
            </p>
        </div>
    </div>

    <h3 style="margin-top: var(--space-6);">Data Partners</h3>
    <div class="grid grid-2">
        <div class="card">
            <h4 style="margin-top: 0;">NMDC</h4>
            <p class="text-small">
                The <strong>National Microbiome Data Collaborative</strong> provides multi-omics microbiome
                data including annotations, metabolomics, and proteomics. Used in Observatory projects
                for environmental and functional analyses.
            </p>
        </div>
        <div class="card">
            <h4 style="margin-top: 0;">ENIGMA</h4>
            <p class="text-small">
                The <strong>Ecosystems and Networks Integrated with Genes and Molecular Assemblies</strong>
                SFA provides environmental microbiology data from Oak Ridge field sites, including genomes,
                communities, and strain isolates.
            </p>
        </div>
        <div class="card">
            <h4 style="margin-top: 0;">JGI</h4>
            <p class="text-small">
                The <strong>Joint Genome Institute</strong> provides upstream genome sequencing, assembly,
                and annotation pipelines. JGI's GOLD and IMG databases supply the foundational genomic
                data underlying BERDL collections.
            </p>
        </div>
        <div class="card">
            <h4 style="margin-top: 0;">PhageFoundry</h4>
            <p class="text-small">
                The <strong>Phage Foundry</strong> provides species-specific genome browsers for
                phage-host interaction research, with curated data for <em>Acinetobacter</em>,
                <em>Klebsiella</em>, <em>Pseudomonas</em>, and other priority pathogens.
            </p>
        </div>
    </div>
</section>

<!-- What is BERDL? -->
<section class="section">
    <h2>What is BERDL?</h2>
    <div class="card">
        <p>
            The <strong>KBase BER Data Lakehouse (BERDL)</strong> is a Delta Lakehouse hosting
            <strong>35 databases across 9 tenants</strong> of curated scientific datasets for
            computational biology research. It provides:
        </p>
        <ul style="margin-top: var(--space-4);">
            <li><strong>Multiple data collections</strong> including pangenomes, mutant fitness data, biochemistry, multi-omics, marine ecology, phage research, and more</li>
            <li><strong>Spark SQL access</strong> for large-scale queries</li>
            <li><strong>JupyterHub integration</strong> for interactive analysis</li>
            <li><strong>REST API</strong> for programmatic access</li>
        </ul>
        <p style="margin-top: var(--space-4);">
            <a href="https://hub.berdl.kbase.us" class="btn btn-secondary" target="_blank">Access BERDL JupyterHub</a>
        </p>
    </div>
</section>

<!-- Primary BERDL Collections -->
<section class="section">
    <h2>Primary BERDL Collections</h2>
    <div class="grid grid-2">
        {% for coll in primary_collections %}
        <a href="/collections/{{ coll.id }}" class="card" style="text-decoration: none;">
            <div class="flex items-center gap-4" style="margin-bottom: var(--space-2);">
                <span style="font-size: 1.25rem;">{{ coll.icon | safe }}</span>
                <h4 style="margin-bottom: 0; color: var(--text-primary);">{{ coll.name }}</h4>
            </div>
            <p class="text-muted text-small" style="font-family: var(--font-mono);">{{ coll.id }}</p>
            <p style="margin-top: var(--space-2);">
                {{ coll.description[:200] }}{% if coll.description|length > 200 %}...{% endif %}
            </p>
        </a>
        {% endfor %}
    </div>
    <p style="margin-top: var(--space-4);">
        <a href="/collections" class="btn btn-primary">Explore All {{ collection_count }} Collections</a>
    </p>
</section>

<!-- AI Integration -->
<section class="section">
    <h2>AI Integration</h2>
    <div class="card">
        <p>
            BERIL provides skills and plugins for AI assistants that enable:
        </p>
        <ul style="margin-top: var(--space-4);">
            <li><strong>Schema exploration</strong> - Understand available tables and columns</li>
            <li><strong>Query generation</strong> - Generate SQL queries for common analysis patterns</li>
            <li><strong>Data interpretation</strong> - Help interpret results in biological context</li>
            <li><strong>Cross-collection analysis</strong> - Combine data from multiple collections</li>
        </ul>
        <p style="margin-top: var(--space-4);">
            AI assistants with BERIL skills can help researchers explore the data lakehouse more efficiently,
            reducing the overhead of learning new schemas and query patterns.
        </p>
    </div>
</section>

<!-- How to Cite -->
<section class="section" id="citation">
    <h2>How to Cite</h2>
    <div class="card">
        <p class="text-small text-muted" style="margin-bottom: var(--space-3);">
            If you use the Microbial Discovery Forge or its findings in your work, please cite:
        </p>
        <pre style="background: var(--surface-overlay); padding: var(--space-4); border-radius: var(--radius-md); font-size: 0.875rem; line-height: 1.6; white-space: pre-wrap;">Paramvir S. Dehal. Microbial Discovery Forge â€” v0.1, 2026. Built on the KBase BER Data Lakehouse (BERDL).</pre>
    </div>
</section>

<!-- Getting Started -->
<section class="section">
    <h2>Getting Started</h2>
    <div class="grid grid-2">
        <div class="card">
            <h4>For Researchers</h4>
            <ol>
                <li>Browse existing <a href="/projects">projects</a> for inspiration</li>
                <li>Explore <a href="/collections">collections</a> to understand available data</li>
                <li>Read <a href="/knowledge/pitfalls">query pitfalls</a> before writing SQL</li>
                <li>Access JupyterHub at <a href="https://hub.berdl.kbase.us" target="_blank">hub.berdl.kbase.us</a></li>
            </ol>
        </div>
        <div class="card">
            <h4>For Contributors</h4>
            <p class="text-small" style="margin-bottom: var(--space-3);">
                For contributions, please contact <a href="mailto:psdehal@lbl.gov">psdehal@lbl.gov</a>.
            </p>
            <ol>
                <li>Pick a <a href="/knowledge/ideas">research idea</a> or propose your own</li>
                <li>Create a project folder in <code>projects/</code></li>
                <li>Document findings in <code>docs/discoveries.md</code></li>
                <li>Share pitfalls and learnings as you go</li>
            </ol>
        </div>
    </div>
</section>

<!-- Resources -->
<section class="section">
    <h2>Resources</h2>
    <div class="grid grid-3">
        <a href="https://hub.berdl.kbase.us" class="card" target="_blank">
            <h4>BERDL JupyterHub</h4>
            <p class="text-muted text-small">Run Spark queries directly on the cluster</p>
        </a>
        <a href="/collections" class="card">
            <h4>Collections</h4>
            <p class="text-muted text-small">Explore data collections and schemas</p>
        </a>
        <a href="/knowledge/pitfalls" class="card">
            <h4>Query Pitfalls</h4>
            <p class="text-muted text-small">Avoid common mistakes</p>
        </a>
    </div>
</section>
{% endblock %}
