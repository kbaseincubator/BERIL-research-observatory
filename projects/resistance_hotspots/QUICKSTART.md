# Antibiotic Resistance Hotspots: Quick Start Guide

## Get Started in 5 Minutes

### 0. Important: Read First!
- **READ [IMPORTANT_NOTES.md](IMPORTANT_NOTES.md) BEFORE RUNNING NOTEBOOKS**
  - Critical information about data structures
  - Known challenges and solutions
  - Performance tips and common issues

### 1. Review the Project Overview
- Open [README.md](README.md) to understand the research question and approach
- Check [ANALYSIS_CHECKLIST.md](ANALYSIS_CHECKLIST.md) to track progress

### 2. Access BERDL
- Navigate to [https://hub.berdl.kbase.us](https://hub.berdl.kbase.us)
- Log in with your KBase credentials
- Start a new JupyterLab session

### 3. Run Notebooks in Order

#### **Phase 1: Data Exploration** (1-2 hours)
```bash
# Open and run: notebooks/01_explore_data.ipynb
# - Verify BERDL access
# - Explore table structures
# - Document schema and sizes
```

#### **Phase 2: ARG Identification** (3-5 hours)
```bash
# Open and run: notebooks/02_identify_args.ipynb
# - Set up ARG reference databases
# - Implement detection logic
# - Generate arg_annotations.csv
```

#### **Phase 3: Distribution Analysis** (2-3 hours)
```bash
# Open and run: notebooks/03_distribution_analysis.ipynb
# - Calculate prevalence metrics
# - Identify hotspot species
# - Generate hotspot_species.csv
```

#### **Phase 4: Pangenome Analysis** (3-4 hours)
```bash
# Open and run: notebooks/04_pangenome_analysis.ipynb
# - Classify core/accessory genes
# - Correlate with ARG diversity
# - Generate pangenome analysis
```

#### **Phase 5: Fitness Analysis** (2-3 hours)
```bash
# Open and run: notebooks/05_fitness_analysis.ipynb
# - Cross-reference fitness data
# - Calculate fitness effects
# - Generate fitness_results.csv
```

#### **Phase 6: Visualizations** (2-3 hours)
```bash
# Open and run: notebooks/06_visualization_dashboards.ipynb
# - Create publication figures
# - Build interactive dashboards
# - Generate summary statistics
```

### 4. Save Results
Data files generated by notebooks:
- `data/arg_annotations.csv` - ARG gene annotations
- `data/hotspot_species.csv` - Species rankings
- `data/fitness_results.csv` - Fitness analysis
- `figures/*.png` - Publication figures

### 5. Document Discoveries
- Add key findings to `../../docs/discoveries.md`
- Share SQL patterns in `../../docs/pitfalls.md`
- Record lessons learned

---

## Useful SQL Queries for BERDL

### Count Genomes by Species
```sql
SELECT s.GTDB_species, COUNT(*) as count
FROM kbase_ke_pangenome.genome g
JOIN kbase_ke_pangenome.gtdb_species_clade s
  ON g.gtdb_species_clade_id = s.gtdb_species_clade_id
GROUP BY s.GTDB_species
ORDER BY count DESC
LIMIT 10
```

### Top Pangenomes by Size
```sql
SELECT GTDB_species, no_genomes, no_core, no_genes
FROM kbase_ke_pangenome.pangenome
ORDER BY no_genes DESC
LIMIT 10
```

### Query Gene Annotations
```sql
SELECT gene_id, orthogroup_id, gene_description
FROM kbase_ke_pangenome.gene
WHERE gene_description IS NOT NULL
LIMIT 100
```

---

## Key Files & Directories

| Path | Purpose |
|------|---------|
| `README.md` | Full project documentation |
| `IMPORTANT_NOTES.md` | **READ THIS FIRST** - Critical data structure info |
| `QUICKSTART.md` | This file |
| `ANALYSIS_CHECKLIST.md` | Track progress through phases |
| `requirements.txt` | Python dependencies |
| `notebooks/` | Jupyter notebooks for analysis (6 phases) |
| `data/` | Generated analysis data files |
| `figures/` | Generated visualizations |
| `results/` | Summary statistics and reports |

---

## Troubleshooting

### Connection Issues
- Verify BERDL access at https://hub.berdl.kbase.us
- Check that `KB_AUTH_TOKEN` is set in `.env` (project root)
- Ensure Spark session is active

### Data Not Found
- Confirm table names (case-sensitive in most databases)
- Use `SHOW TABLES IN kbase_ke_pangenome` to list available tables
- Check for pagination/limits in queries

### Performance
- BERDL is optimized for Spark queries
- Use `LIMIT` in development queries
- Partition data when possible
- Consider pre-computing intermediate results to `data/`

---

## Resources

- **BERDL JupyterHub**: https://hub.berdl.kbase.us
- **KBase**: https://www.kbase.us
- **CARD Database**: https://card.mcmaster.ca/
- **ResFinder**: https://www.ncbi.nlm.nih.gov/pubmed/22782694
- **GTDB**: https://gtdb.ecogenomic.org/

---

## Need Help?

1. Check the notebook comments - each phase has detailed instructions
2. See `../../docs/pitfalls.md` for common SQL gotchas
3. Review `../../docs/schema.md` for detailed table structure
4. Consult the main README.md for project overview

---

**Ready to get started?** Begin with `notebooks/01_explore_data.ipynb`!
